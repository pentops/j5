package test.foo.v1


entity Foo {
	key fooId ! key:uuid {
		primary = true
	}

	key barId ! key:uuid {
		foreign = "test.foo.v1.Bar"
	}

	status ACTIVE
	status INACTIVE

	data name string {
		listRules.searching.searchable = true
	}

	data bar object:Bar

	data createdAt timestamp {
		listRules {
			filtering.filterable = true
			sorting.defaultSort = true
			sorting.sortable = true
		}
	}

	event Created {
		field field string
	}

	event Updated {
		field field string
	}

	command {
		method DownloadRaw {
			httpMethod = "GET"
			httpPath = "/:id/raw"
			httpResponse = true

			request {
				field id ! key:uuid
			}
		}
	}
}

object Bar {
	field id key:uuid {
		listRules.filtering.filterable = true
	}

	field field string {
		listRules.searching.searchable = true
	}
}
